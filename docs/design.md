# プロンプト管理機能 全体設計書

---

## 目的

ChatGPTやGeminiなどのAIチャットサービスで使用するプロンプトを効率的に管理・実行するための機能を提供する。
特にプロンプトの自動保存、編集、ピン留め、履歴管理、キーワード絞り込みなどの操作を容易にすることで、ユーザーの利便性を向上させる。

## 機能要件

1. プロントの保存
   - セッション判定
     - プロンプトを呼び出したら、セッションを開始
   - セッションなし
     - 手動保存: プロンプトの編集ダイアログを表示後、新規プロンプトとして保存
     - 送信時: 新規プロンプトとして自動保存
   - セッションあり
     - 手動保存: プロンプトの編集ダイアログを表示後、呼び出しプロンプトを別名保存、または上書き保存
     - 送信時: 新規プロンプトとして自動保存
   - 手動での保存時は、自動的にピン留めする
2. プロンプトの実行
   - 入力欄へのプロンプト挿入
   - 実行回数のインクリメント
3. 保存・実行対象サービス
   - ChatGPT
   - Gemini
   - Claude
   - Perplexity
4. プロンプトの編集
   - 名前、内容
5. ピン留め、解除
6. プロンプトの表示順序変更
   - 手動
   - 複合順位スコア(最新実行日付、実行回数)
7. プロンプトのキーワード絞り込み
8. 履歴のエクスポート
9. 最大数を超えた履歴の破棄
10. 入力欄のセレクタのfetch

## データ構造

1. プロンプト
   - id
   - 名前
   - 内容
   - 実行回数
   - 最新実行日時
   - ピン留め
   - 最終実行URL
2. セッション
   - 実行中プロンプトid
3. プロンプト履歴
   - 配列
     - プロンプトid
     - 最新実行日時
4. ピン留めプロンプトの並び順
   - 配列
     - プロンプトid
